---
sidebar_position: 1
description: NATのしくみ
---

# NATのしくみ
## NATとはそもそもなんなのか(NetWork Access Translation)
結論からいえばプライベートIPを公開IPに変換するためのもの

### 静的NAT(Static NAT)
- プライベートIPとグローバルIPを1対1で変換するためのもの。
- 主に用途はサーバーとか常時外部からアクセスされる端末に使うもの。

### 動的NAT(Dynamic NAT)
- 使っていいグローバルIPをいくつかリストにして、プライベートIPがグローバルIPを必要としたときに渡すスタイル
- 通信終了したらグローバルIPを返却することで使いまわしを可能とするすごすごシステム
- とはいっても大量にグローバルIPを用意することなんて無理なので一般のご家庭では無理です

### Port Address Translation
- 1つのグローバルIPとポート番号を使って複数端末を識別する。
- 一般のご家庭ではこれを使うことがほとんど
- プライベートIP:1234 ⇒ グローバルIP:50001

## NATの挙動
### 静的NATはどう動いているのか

プライベートIPアドレスに固定的にグローバルIPアドレスを割り当てます。

- PC用のプライベートIPでルーターを経由して外に出ようとするとNATぱわーでグローバルIPにつなげて通信します
- プライベートIPをグローバルIPにするだけなので外部からアクセスできる

### 動的NATはどう動いているのか

ルーターがグローバルIPをいくつか持っていて、通信したいプライベートIPアドレスがグローバルIPアドレスを借りて通信する携帯のことです。

- 通信終了したらその都度グローバルIPアドレスを返却しているため、同じIPアドレスを使い続けて通信することはない
- つまりグローバルIPを指定して内部の特定の機器に通信しようとすることは不可能
- グローバルIPアドレスが足りなくなったら通信できなくなる


